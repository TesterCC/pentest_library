# coding=utf-8
"""
DATE:   2022/5/19
AUTHOR: TesterCC
"""
# https://mp.weixin.qq.com/s/de3whqmwVtwWWZ8B6J7Zww

import socket
from binascii import unhexlify, hexlify


def getSZL001c(Respons):
    for i in range(int(len(Respons) / 68)):
        data = Respons[i * 68 + 4:i * 68 + 68].replace("00", "")
        try:
            if unhexlify(data).decode("utf-8", "ignore") != "":
                print(unhexlify(data).decode("utf-8", "ignore"))
        except:
            pass


def getSZL0011(Respons):
    for i in range(int(len(Respons) / 56)):
        data = Respons[i * 56 + 4:i * 56 + 56].replace("00", "")
        try:
            if unhexlify(data).decode("utf-8", "ignore") != "":
                print(unhexlify(data).decode("utf-8", "ignore"))
        except:
            pass


def main():
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.connect(("10.0.4.143", 102))
    sock.send(unhexlify("0300001611e00000000100c0010ac1020100c2020102"))
    sock.recv(1024)
    sock.send(unhexlify("0300001902f08032010000080000080000f0000001000101e0"))
    sock.recv(1024)
    sock.send(unhexlify("0300002102f080320700000a00000800080001120411440100ff090004001c0000"))
    Respons = (hexlify(sock.recv(1024)).decode())[82:]
    getSZL001c(Respons)
    sock.send(unhexlify("0300002102f080320700000a00000800080001120411440100ff09000400110000"))
    Respons = (hexlify(sock.recv(1024)).decode())[82:]
    getSZL0011(Respons)
    sock.close()


if __name__ == '__main__':
    main()
